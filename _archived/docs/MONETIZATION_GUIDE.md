# دليل تحقيق الدخل (Monetization Strategy)

تحويل نظام "MoneyTracker" إلى منتج SaaS (Software as a Service) باستخدام Google Apps Script يتطلب استراتيجية ذكية للتعامل مع قيود جوجل وحماية الملكية الفكرية.

## نماذج العمل المتاحة (Business Models)

### 1. بيع النسخ (Digital Download Model)
**الفكرة:** يشتري العميل نسخة خاصة به لمرة واحدة.
- **الآلية:** تبيع "قالب" (Google Sheet Template) يحتوي على السكربت.
- **المزايا:** سهل التنفيذ، لا تكاليف خوادم عليك (كل عميل يستخدم مساحته الخاصة).
- **العيوب:** المستخدم يملك السكربت ويمكنه نسخه وتوزيعه مجاناً.
- **الحماية:** صعبة جداً في Apps Script لأن الكود يكون مرئياً للمالك. يمكن استخدام الـ Libraries لإخفاء الكود الأساسي، لكنه ليس آمناً 100%.

### 2. نموذج الإصدار المركزي (Centralized Web App)
**الفكرة:** تطبيق ويب واحد (Web App) يدخله جميع المستخدمين.
- **الآلية:** تطبيقك `index.html` هو الواجهة، وقاعدة البيانات هي Google Sheets متعددة (أو Firebase).
- **المزايا:** حماية كاملة للكود (على حسابك)، تحكم كامل بالاشتراكات.
- **العيوب:** ستستهلك كوتة (Quota) حسابك بسرعة كبيرة. تحتاج للترقية إلى Google Cloud Platform (GCP) أو استخدام استضافة خارجية للواجهة.

### 3. نموذج "الهجين" (Managed SaaS with Add-on)
**الفكرة:** العميل يملك الـ Sheet، لكن "العقل" (السكربت) موجود كـ Google Workspace Add-on أو Library لديك.
- **الآلية:**
  1. انشر الكود الأساسي كـ **Library** خاصة (تمنح صلاحية القراءة للمشتركين فقط).
  2. العميل يحصل على Sheet بها "Loader Script" بسيط جداً يستدعي الـ Library.
  3. **نظام التراخيص (Licensing):** عند تشغيل أي دالة، تتحقق الـ Library من "سيرفر التراخيص" (Sheet لديك تحتوي على إيميلات المشتركين وتاريخ الانتهاء).

---

## خطوات التنفيذ لبيع النظام

### الخطوة 1: حماية الكود (SaaS Protection)
لا تعطِ العميل ملف `.js` بجميع الدوال.
1. أنشئ مشروع سكربت جديد تسميه `MoneyTracker_CORE`.
2. ضع فيه كل "منطق" النظام (Flows, Calculations).
3. انشره كـ **Library**.
4. في ملف العميل، الكود يكون فقط:
   ```javascript
   function doPost(e) { return MoneyTrackerCore.doPost(e); }
   function onOpen() { MoneyTrackerCore.onOpen(); }
   ```
   هكذا لا يرى العميل كيف يعمل النظام، وإذا ألغيت اشتراكه، تقوم بإزالة إيميله من صلاحيات الـ Library، فيتوقف النظام لديه.

### الخطوة 2: بوابة الدفع (Payment Gateway)
استخدم Gumroad أو Paddle أو Stripe.
- **Gumroad:** أسهل خيار. يمكنك بيع "Access to Google Sheet".
- اربط Gumroad بـ GAS عبر Webhook: عند الشراء، يتم إضافة إيميل العميل تلقائياً إلى "جدول التراخيص" في نظامك.

### الخطوة 3: التسليم الآلي (Onboarding)
1. العميل يشتري.
2. يتم تفعيل ترخيصه الياً في قاعدة بياناتك.
3. يصله إيميل برابط لنسخ الـ Sheet (Make a copy).
4. عند تشغيل الـ Sheet لأول مرة، يطلب النظام منه إدخال "مفتاح الترخيص" أو يتحقق من إيميله تلقائياً.

## نصائح تقنية للـ SaaS على Google
1. **Quotas:** حسابات @gmail.com العادية لها حدود ضيقة (مثل 20,000 URL Fetch يومياً). لحل تجاري، استخدم حساب **Google Workspace** (Business Starter) لزيادة الحدود.
2. **Error Logging:** اجعل جميع نسخ العملاء ترسل الأخطاء (Logs) إلى جدول مركزي لديك لمراقبة المشاكل.
3. **التحديثات:** عند استخدام نموذج Library، أي تحديث "Version" جديد تقوم به في الـ Library الرئيسية ينعكس فوراً عند جميع العملاء. هذا هو السحر الحقيقي لنموذج الـ Library!

## الملخص
أفضل طريقة لبيع هذا النظام هي:
**"Sheet as a Frontend + Library as a Backend + Gumroad for Payments"**
